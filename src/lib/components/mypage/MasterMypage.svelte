<script>
	import CommonMypageItem from './CommonMypageItem.svelte';
	import MasterMypageItem from './MasterMypageItem.svelte';

	/**
	 * @type {Object} ì»´í¬ë„ŒíŠ¸ Props
	 * @property {import('@supabase/supabase-js').User} user - ì‚¬ìš©ì ê°ì²´
	 * @property {Object | null} userProfile - ì‚¬ìš©ì í”„ë¡œí•„
	 */
	let { user, userProfile } = $props();

	/** @type {string} í™œì„± ë©”ë‰´ */
	let activeMenu = $state('profile');

	/**
	 * ë©”ë‰´ ë³€ê²½ í•¸ë“¤ëŸ¬
	 * @param {string} menuId - ë©”ë‰´ ID
	 */
	function handleMenuChange(menuId) {
		activeMenu = menuId;
	}

	/**
	 * ë©”ë‰´ í•­ëª© (ê³µí†µ + ê´€ë¦¬ì + ë§ˆìŠ¤í„°)
	 * @type {Array<{id: string, label: string, icon: string, href?: string}>}
	 */
	const menuItems = $derived([
		{ id: 'profile', label: 'C-í”„ë¡œí•„', icon: 'ğŸ‘¤' },
		{ id: 'settings', label: 'C-ì„¤ì •', icon: 'âš™ï¸' },
		{ id: 'users', label: 'A-ì‚¬ìš©ì ê´€ë¦¬', icon: 'ğŸ‘¥', href: '/admin/users' },
		{ id: 'inquiries', label: 'A-ë¬¸ì˜ ê´€ë¦¬', icon: 'ğŸ’¬', href: '/admin/inquiries' },
		{ id: 'categories', label: 'A-ì¼ì • ì¹´í…Œê³ ë¦¬ ê´€ë¦¬', icon: 'ğŸ“', href: '/admin/categories' },
		{ id: 'board-categories', label: 'A-ê²Œì‹œíŒ ì¹´í…Œê³ ë¦¬ ê´€ë¦¬', icon: 'ğŸ“‹', href: '/admin/board-categories' },
		{ id: 'boards', label: 'A-ê²Œì‹œíŒ ê´€ë¦¬', icon: 'ğŸ“Š', href: '/admin/boards' },
		{ id: 'database', label: 'A-Database ê´€ë¦¬', icon: 'ğŸ—„ï¸', href: '/admin/database' },
		{ id: 'logs', label: 'A-ì•¡ì…˜ ë¡œê·¸', icon: 'ğŸ“', href: '/admin/logs' },
		{ id: 'system', label: 'M-ì‹œìŠ¤í…œ ê´€ë¦¬', icon: 'ğŸ”§' },
		{ id: 'system-guide', label: 'M-ì‹œìŠ¤í…œ êµ¬ì„± ê°€ì´ë“œ', icon: 'ğŸ”‘', href: '/admin/system-guide' },
		{ id: 'features', label: 'M-ê¸°ëŠ¥ ê°œë°œ', icon: 'ğŸ”‘', href: '/admin/features' }
	]);
</script>

<CommonMypageItem
	{user}
	{userProfile}
	{activeMenu}
	{menuItems}
	onMenuChange={handleMenuChange}
	roleColorClass="bg-purple-100 text-purple-800"
	activeColorClass="bg-purple-50 text-purple-700"
>
	<MasterMypageItem {activeMenu} />
</CommonMypageItem>

